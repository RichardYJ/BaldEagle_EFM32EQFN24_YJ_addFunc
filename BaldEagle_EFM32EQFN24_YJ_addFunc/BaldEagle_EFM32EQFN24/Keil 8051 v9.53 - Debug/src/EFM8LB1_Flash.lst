C51 COMPILER V9.53.0.0   EFM8LB1_FLASH                                                     03/12/2018 16:31:20 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE EFM8LB1_FLASH
OBJECT MODULE PLACED IN .\src\EFM8LB1_Flash.OBJ
COMPILER INVOKED BY: c:\SiliconLabs\SimplicityStudio\v4\developer\toolchains\keil_8051\9.53\BIN\C51.exe D:\WorkSpace\MyC
                    -ode\SYNC\BaldEagle_EFM32EQFN24_YJ_addFunc\BaldEagle_EFM32EQFN24\src\EFM8LB1_Flash.c OMF2 LARGE DEBUG OBJECTEXTEND ROM(LA
                    -RGE) WARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(8,SPEED) DEFINE(DEBUG=1) INTVECTOR(0X0000) INTPROMOTE INCDIR(D:\WorkSpace\My
                    -Code\SYNC\BaldEagle_EFM32EQFN24_YJ_addFunc\BaldEagle_EFM32EQFN24\inc;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8
                    -051/v4.1.1//Device/shared/si8051base;C:/SiliconLabs/SimplicityStudio/v4/developer/sdks/8051/v4.1.1//Device/EFM8LB1/inc) 
                    -PRINT(.\src\EFM8LB1_Flash.lst) COND PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src\EFM8LB1_Flash.OBJ)

line level    source

   1          
   2          
   3          //-----------------------------------------------------------------------------
   4          // Includes
   5          //-----------------------------------------------------------------------------
   6          #include <SI_EFM8LB1_Register_Enums.h>
   7          #include "EFM8LB1_Flash.h"
   8          
   9          void FLASH_ByteWrite (FLADDR addr, uint8_t byte)
  10          {
  11   1         bool EA_SAVE = IE_EA;                
  12   1         uint8_t SAVE_SFRPAGE;
  13   1         SI_VARIABLE_SEGMENT_POINTER(pwrite, uint8_t, SI_SEG_XDATA); 
  14   1      
  15   1         SAVE_SFRPAGE = SFRPAGE;
  16   1         SFRPAGE = 0;
  17   1         IE_EA = 0;                         
  18   1      
  19   1         VDM0CN = 0x80;                     
  20   1      
  21   1         RSTSRC = 0x02;                     
  22   1      
  23   1         pwrite = (SI_VARIABLE_SEGMENT_POINTER(, uint8_t, SI_SEG_XDATA)) addr;
  24   1      
  25   1         FLKEY  = 0xA5;                     
  26   1         FLKEY  = 0xF1;                     
  27   1         PSCTL |= 0x01;                     
  28   1      
  29   1         VDM0CN = 0x80;                     
  30   1      
  31   1         RSTSRC = 0x02;                     
  32   1         *pwrite = byte;                    
  33   1      
  34   1         PSCTL &= ~0x01;                    
  35   1      
  36   1         SFRPAGE = SAVE_SFRPAGE;
  37   1         IE_EA = EA_SAVE;                   
  38   1      }
  39          
  40          uint8_t FLASH_ByteRead (FLADDR addr)
  41          {
  42   1              uint8_t SAVE_SFRPAGE;
  43   1      
  44   1         bool EA_SAVE = IE_EA;                
  45   1         SI_VARIABLE_SEGMENT_POINTER(pread, uint8_t, const SI_SEG_CODE); 
  46   1         uint8_t byte;
  47   1         SAVE_SFRPAGE = SFRPAGE;
  48   1         SFRPAGE = 0;
  49   1      
  50   1         IE_EA = 0;                          
  51   1      
C51 COMPILER V9.53.0.0   EFM8LB1_FLASH                                                     03/12/2018 16:31:20 PAGE 2   

  52   1         pread = (SI_VARIABLE_SEGMENT_POINTER(, uint8_t, const SI_SEG_CODE)) addr;
  53   1      
  54   1         byte = *pread;                      
  55   1      
  56   1         SFRPAGE = SAVE_SFRPAGE;
  57   1         IE_EA = EA_SAVE;                    
  58   1      
  59   1         return byte;
  60   1      }
  61          
  62          void FLASH_PageErase (FLADDR addr)
  63          {
  64   1         bool EA_SAVE = IE_EA;                
  65   1         uint8_t SAVE_SFRPAGE;
  66   1         SI_VARIABLE_SEGMENT_POINTER(pwrite, uint8_t, SI_SEG_XDATA);
  67   1      
  68   1         SAVE_SFRPAGE = SFRPAGE;
  69   1         SFRPAGE = 0;
  70   1         IE_EA = 0;                          
  71   1      
  72   1         VDM0CN = 0x80;                      
  73   1      
  74   1         RSTSRC = 0x02;                      
  75   1      
  76   1         pwrite = (SI_VARIABLE_SEGMENT_POINTER(, uint8_t, SI_SEG_XDATA)) addr;
  77   1      
  78   1         FLKEY  = 0xA5;                      
  79   1         FLKEY  = 0xF1;                      
  80   1         PSCTL |= 0x03;                      
  81   1      
  82   1         VDM0CN = 0x80;                      
  83   1      
  84   1         RSTSRC = 0x02;                      
  85   1         *pwrite = 0;                        
  86   1      
  87   1         PSCTL &= ~0x03;                     
  88   1      
  89   1         SFRPAGE = SAVE_SFRPAGE;
  90   1         IE_EA = EA_SAVE;                    
  91   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    125    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       3
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
